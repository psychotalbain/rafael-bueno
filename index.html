<!DOCid html>
<html>
  <head>
    <title>YpNext FrontEnd Test - Greenthumb</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./css/index.css" />
    <script>
      let listData = []; // declaração da lista de plantas

      fetch("./plants.json") // path to file
        .then((response) => response.json()) // return file content
        .then((data) => {
          // attribute info in variable
          listData = data;
        })
        .catch((error) => console.error(error));

      // Set value in select, receive id, and set value
      function selectSetValue(id, valueToSelect) {
        const element = document.getElementById(id);
        element.value = valueToSelect;
      }

      // Called by select on change value
      function selectFilter(selectObject) {
        switch (selectObject.id) {
          case "sun":
            selectSetValue("water", "");
            selectSetValue("pet", "");
            break;
          case "water":
            selectSetValue("pet", "");
            selectSetValue("sun", "");
            break;
          case "pet":
            selectSetValue("water", "");
            selectSetValue("sun", "");
            break;
        }
        applyFilter(selectObject.id, selectObject.value);
      }

      // Apply filter in listData
      function applyFilter(id, value) {
        // filtered list
        const listFiltered = listData.filter((item) => {
          switch (id) {
            case "sun":
              if (value == item.sun) {
                return item;
              }
              break;
            case "water":
              if (value == item.water) {
                return item;
              }
              break;
            case "pet":
              if (value === "true" && item.toxicity) {
                return item;
              } else if (value === "false" && !item.toxicity) {
                return item;
              }
              break;
          }
        });

        // rendered list
        const container = document.getElementById("result");
        if (listFiltered.length == 0) {
          // if no plants in list
          container.innerHTML = `
          <div class="no-item-container">
            <div class="no-item-title">
              <h1>No results yet...</h1>
              <p>
                Use the filters above to find<br />the plant that best fits your<br />environment
                :)
              </p>
            </div>
            <img class="no-item-img" src="images/illustrations/no-results.png" />
          </div>`;
        } else {
          // case exist plant in list, renderer
          const divContainer = document.createElement("div");
          divContainer.className = "item-container";

          listFiltered.map((item) => {
            // create element tags html
            const divItem = document.createElement("div");
            const img = document.createElement("img");
            const divPrice = document.createElement("div");
            const name = document.createElement("p");
            const price = document.createElement("p");

            // set class in element tags
            img.className = "item-img";
            divItem.className = "item";
            divPrice.className = "item-title";

            // set values in element tags
            img.src = item.url;
            name.textContent = item.name;
            price.textContent = `$ ${item.price}`; // use `` and ${variable} to transform variable in string

            // append element tags in other element tags
            divItem.appendChild(img);
            divPrice.appendChild(name);
            divPrice.appendChild(price);
            divItem.appendChild(divPrice);

            // item created:
            // <div class="item">
            //  <img  class="item-img" src={item.url}/>
            //  <div class="item-title">
            //     <p>{item.name}</p>
            //     <p>{item.price}</p>
            //  </div>
            // </div>

            // add create item in div line list, flex
            divContainer.appendChild(divItem);
          });

          // clear content in container
          container.innerHTML = "";
          // set div list with items in container
          container.appendChild(divContainer);
        }
      }
    </script>
  </head>

  <body>
    <!-- START: Div Header -->
    <div class="header">
      <!-- Left -->
      <div class="header-container">
        <img class="desktop" src="./images/hero/desktop/left-leaves.png" />
        <img class="mobile" src="./images/hero/mobile/mobile-leaves.png" />
        <div class="header-title">
          <p>green thumb.</p>
          <h2>Find your<br />next green<br />friend</h2>
          <img class="icon" src="./images/icons/arrow-down.svg" />
        </div>
      </div>
      <!-- Mid -->
      <div>
        <img class="desktop" src="./images/hero/desktop/plantperson.png" />
        <img class="mobile" src="./images/hero/mobile/mobile-plantperson.png" />
      </div>
      <!-- Right -->
      <div>
        <img src="./images/hero/desktop/right-leaves.png" />
      </div>
    </div>
    <!-- END: Div Header -->

    <!--  START: Div all selectors -->
    <div class="selectors-container">
      <!-- Select Sun -->
      <div class="select-container">
        <img
          src="../../images/illustrations/sun.png"
          alt="select-icon-sun"
          class="select-left-icon"
        />
        <p class="select-title">
          <b>1.</b> Set the amount of <b>sunlight</b> your plant will get.
        </p>

        <select
          class="selector-component"
          id="sun"
          onchange="selectFilter(this)"
        >
          <option value="" disabled selected>Select...</option>
          <option value="no">no</option>
          <option value="low">low</option>
          <option value="high">high</option>
        </select>
      </div>

      <!-- Select Water -->
      <div class="select-container">
        <img
          src="../../images/illustrations/wateringcan.png"
          alt="select-icon-water"
          class="select-left-icon icon-flip"
        />
        <p class="select-title">
          <b>2.</b> How often you want do <b>water</b> your plant?
        </p>

        <select
          class="selector-component"
          id="water"
          onchange="selectFilter(this)"
        >
          <option value="" disabled selected>Select...</option>
          <option value="regularly">regularly</option>
          <option value="daily">daily</option>
          <option value="rarely">rarely</option>
        </select>
      </div>

      <!-- Select Toxicity -->
      <div class="select-container">
        <img
          src="../../images/illustrations/dog.png"
          alt="select-icon-dog"
          class="select-left-icon"
        />
        <p class="select-title">
          <b>3.</b> Do you have pets? Do they <b>chew</b> plants?
        </p>

        <select
          class="selector-component"
          id="pet"
          onchange="selectFilter(this)"
        >
          <option value="" disabled selected>Select...</option>
          <option value="true">true</option>
          <option value="false">false</option>
        </select>
      </div>
    </div>
    <!--  END: DIV Selector  -->

    <!-- START: Div Plants -->
    <div id="result">
      <div class="no-item-container">
        <div class="no-item-title">
          <h1>No results yet...</h1>
          <p>
            Use the filters above to find<br />the plant that best fits your<br />environment
            :)
          </p>
        </div>
        <img class="no-item-img" src="images/illustrations/no-results.png" />
      </div>
    </div>
    <!-- END: Div Plants -->
  </body>
</html>
